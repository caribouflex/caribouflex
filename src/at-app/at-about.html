<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../components/mix-letter.html">


<dom-module id="at-about">
  <template>
    <style>
      :host {
        display: block;
      }

      #background {
        display: block;
        /* background-color: var(--dark-primary-color); */
        background-color: black;
        top: 50px;
        height: 140px;
        left: 256px;
        padding-left: 6vmax;
        z-index: 1000;
        position: fixed;
        width: 315px;
      }

      .section {
        max-width: 600px;
        margin: 150px 20px 50px 100px;
      }

      .section p {
        line-height: 1.6;
      }
    </style>
    <div id="background"></div>
    <div class="divContent">
      <mix-letter class="wordMove" word="About"></mix-letter>
      <section id="aboutSection" class="section">
        <h1>Hi, I'm Arthur. </h1>
        <p>Well, I don't have a lot to say about me. I'm a french guy living in Montreal (Canada.. I have to precise apparently
          some people don't really know where it is on a map. CLick here for more detail)</p>

        <p>You didn't clicked ? Ok click now, it worth it ! </p>

        <p>I originaly from Paris, well the purist will say BooooooOOooO.. But if I tell you where I'm really from you will
          like.. "EMOJI QUESTION MARK". (next to Disneyland Resort Paris).</p>

        <p>I'm a web developer, frontend/backend, I really don't know yet where is my destiny, I like both but maybe my heart
          goes to frontend a little more. I'm currently working at
          <a href="http://www.distech-controls.com">Distech Controls</a> since now, at least 4 years. (Long time hiin..). It's specialized in building automation,
          so none of my work is visible except for the tech guy who is in the ceiling. </p>

        <p>I work on polymer most of the time for the frontend, and the backend is more with basic Java servlet.</p>

        <p>On my free time, and my coding mood, I like to try new stuff discovered new languages, new framework, create stuff
          that may be useless or useful. Here is my GITHUB
          <a href="https://github.com/caribouflex">repo</a>
        </p>

        <p>Otherwise I'm a soccer fan, France for the national team (my heart stay there "FRANCE EMOJI FLAG") and then RCLens
          is my heart team, but otherwise I like Juventus, Chelsea and PSG.</p>

        <p>Well it's a pretty nice resume.</p>

        <p>Thanks for reading ! Peace "EMOJI PEACE" (two fingers)</p>
      </section>
    </div>
    <div class="divContent"> 
      <mix-letter class="wordMove" word="Scholarship"></mix-letter>
      <div style="height:1000px;display:block;"></div>
    </div>
    <div class="divContent">
      <mix-letter class="wordMove" word="Work"></mix-letter>
      <div style="height:1000px;display:block;"></div>
    </div>
    <div class="divContent">
      <mix-letter class="wordMove" word="Hobbies"></mix-letter>
      <div style="height:1000px;display:block;"></div>
    </div>
  </template>

  <script>
    /**
     * @customElement
     * @polymer
     */
    class AtAbout extends Polymer.Element {
      static get is() {
        return 'at-about';
      }
      static get properties() {
        return {
          observer: Object,
          current: {
            type: Number,
            value: -1
          },

          allEntries: {
            type: Array,
            value: function () {
              return [];
            }
          },

          sections: {
            type: Array,
            value: function () {
              return [];
            }
          }
        };
      }

      ready() {
        super.ready();
      }

      connectedCallback() {
        super.connectedCallback();
        this.sections = Array.from(this.shadowRoot.querySelectorAll('.divContent'));

        if ('IntersectionObserver' in window) {
          document.body.classList.add('ioapi');

          this.observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
              if (entry.intersectionRatio > 0.5) {
                const newcurrent = this.sections.indexOf(entry.target);
                if (newcurrent === this.current) return;
                const direction = newcurrent > this.current;
                if (this.current >= 0) {
                  this.allEntries[this.current].exit(direction ? 'down' : 'up');
                }
                this.allEntries[newcurrent].enter(direction ? 'down' : 'up');
                this.current = newcurrent;
              }
            });
          }, {
            threshold: 0.5
          });

          this.allEntries = Array.from(this.shadowRoot.querySelectorAll('.wordMove'));
          this.sections.forEach(section => {
            //section.querySelector('.wordMove');
            this.observer.observe(section);
          });
        }
      }
    }

    window.customElements.define(AtAbout.is, AtAbout);
  </script>
</dom-module>